# 1장 데이터 모델링의 이해

## 데이터 모델

### 데이터 모델링의 중요성 및 유의점
- **중복** : 같은 시간, 같은 데이터를 제공해야 함

- **비 유연성** : 사소한 업무 변화에 데이터 모델이 수시로 변경되면 안된다.
    - 데이터 정의를 사용 프로세스와 분리한다.

- **비 일관성** : 데이터 간 상호 연관 관계에 대해 명확히 정의해야 한다.

<br>

### 데이터 모델링
- **개념적 데이터 모델링** : 현실 세계 → 개념 세계

- **논리적 데이터 모델링** : 개념 세계 → 데이터베이스

- 물리적 데이터 모델링

<br>

### 데이터 독립성 요소
![alt text](./[현준]%20Image/image.png)

- 외부 스키마 : 각기 다른 사용자가 보는 개인적 DB 스키마

- 개념 스키마 : 모든 사용자 관점을 통합한 전체 DB

- 내부 스키마 : 물리적 장치에서 데이터가 실제적 저장


<br>

### 데이터 독립성
- 논리적 독립성 : 개념 스키마를 변경, 외부 스키마에 영향을 주면 안된다.

- 물리적 독립성 : 내부 스키마를 변경한다, 외부 / 개념 스키마에 영향을 주지 않는다.

<br>

### Mapping (사상)
> 상호 독립적인 개념을 연결시켜주는 다리

- 논리적 사상 : 외부 스키마와 개념 스키마를 연결

- 물리적 사상 : 개념 스키마와 내부 스키마를 연결

<br>

### 데이터 모델링의 3요소
- 어떤 것 (Things)
- 성격 (Attributes)

- 관계 (Relationships)

<br>

### 모델링의 특징
- 현실 세계에 있는 것을 **추상화, 단순화, 정확화** 하여 **모델**로 만드는 것

<br>

### 데이터 모델 표기법
1976년 피터첸이 Entity Relationship Model 개발
- IE, Baker 기법이 많이 쓰임

- 엔터티, 관계, 속성으로 이루어짐

<br>

### ERD 작업 순서
1. 엔터티 그림

2. 엔터티 배치

3. 엔터티 관계 설정

4. 관계명 기술 (비식별 관계, 식별 관계)

5. 관계의 참여도 기술 

6. 관계필수 여부 (`1 : 1`, `0 or 1`, `1 이상`)

<br>

### 좋은 데이터 모델의 요소

1. 완전성 : 업무에 필요한 모든 데이터가 모델에 정의

2. 중복배재 : 하나의 DB내에 동일한 사실은 한번만

3. 업무규칙 : 많은 규칙을 사용자가 공유하도록 제공

4. 데이터 재사용 : 데이터가 독립적으로 설계되어야 함

5. 의사소통 : 업무규칙은 엔터티, 서브타입, 속성, 관계 등의 형태로 최대한 자세히 표현

6. 통합성 : 동일한 데이터는 한 번만 정의, 참조 활용

<br>

## 엔터티

### 엔터티
> 업무에 필요하고 유용한 정보를 저장하고 관리하기 위한 집합적인 것, 보이지 않는 개념 포함

![alt text](./[현준]%20Image/image-1.png)

**엔터티의 특징**
1. 반드시 해당 업무에서 필요하고, 이를 관리하고자 하는 목적

2. 유일한 식별자에 의해 식별 가능
3. 두 개 이상의 인스턴스의 집합

4. 업무 프로세스에 의해 이용되어야 함
5. 반드시 속성이 있어야 함
6. 다른 엔터티와 최소 1개 이상의 관계가 있어야 함
    - 통계성 / 코드성 엔터티는 관계 생략 가능

<br>

### 엔터티의 분류 : 유무형에 따른 분류
- 유형 분류 : 물리적 형태 (사원, 물품, 강사)

- 개념 분류 : 개념적 정보 (조직, 보험 상품)

- 사건 분류 : 업무 수행 시 발생 (주문, 청구, 미납)

<br>

### 발생시점에 따른 분류 
- 기본 : 업무에 원래 존재하는 정보 (`사원`, `부서`)
    
    - 타 엔터티의 부모 역할

    - 자신의 고유한 주식별자 가짐

- 중심 : 기본 엔터티로부터 발생 (`계약`, `사고`, `주문`)
    - 다른 엔터티와의 관계로 많은 행위 엔터티 생성 

- 행위 : 2개 이상의 부모 엔터티로 부터 발생, 자주 바뀌거나 양이 증가 (`주문목록`, `사원변경이력`)

<br>

### 엔터티의 명명

- 현업업무에서 사용하는 용어 사용

- 약어 사용 금지

- 단수명사 사용

- 고유한 이름 사용
- 생성 의미대로 부여

<br>

## 속성
### 속성
> 업무에서 필요로 하는 인스턴스로 관리하고자 하는 의미상 분리되지 않는 최소의 데이터 단위
- 한 개의 엔터티는 2개 이상의 인스턴스 집합

- 한 개의 엔터티는 2개 이상의 속성을 가짐

- 한 개의 속성은 1개의 속성값을 가짐

<br>

### 구성 방식의 분류
- Primary Key
- Foreign Key

- 일반 속성

<br>

### 속성의 분류
- 기본 : 업무로부터 추출한 모든 일반적인 속성

- 설계 : 업무를 규칙화하기 위해 새로 만들거나 변형, 정의하는 속성

- 파생 : 다른 속성에 영향을 받아 발생하는 속성
    - 빠른 성능을 낼 수 있도록 원래 속성의 값을 계산

    - `Sum` / `Aver`

<br>

### 도메인
- 속성에 대한 데이터타입, 크기, 제약사항 지정

<br>

### 속성의 명명
1. 해당업무에서 사용하는 이름 부여

2. 서술식 속성명은 사용 금지

3. 약어 사용 금지
4. 구체적으로 명명하여 데이터 모델에서 유일성 확보

<br>

## 식별자
### 식별자
> 엔터티 내에서 인스턴스를 구분하는 구분자, 식별자는 논리적 스키마 <br>
> Key는 물리적 데이터 모델링 단계에 사용

<br>

## 식별자의 특징
- **유일성** : 주 식별자에 의해 모든 인스턴스들이 유일하게 구분됨

- **최소성** : 주 식별자를 구성하는 속성의 수는 유일성을 만족하는 최소의 수가 되어야함

- **불변성** : 지정된 주식별자의 값은 자주 변하지 않아야 함. 변하면 이전 기록이 말소됨

- **존재성** : 주식별자가 지정되면 반드시 값이 들어와야 함
<br>

### 식별자 분류
#### 대표성 여부
- 주 식별자 : 엔터티 내에서 서로를 구분할 수 있는 구분자, 타 엔터티나 참조관계를 연결함

- 보조 식별자 : 구분자이나 대표성이 없음, 참조관계 연결도 없음

#### 스스로 생성 여부
- 내부 식별자 : 스스로 생성되는 식별자

- 외부 식별자 : 타 엔터티로부터 받아오는 식별자

<br>

### 속성의 수
- 단일 식별자 : 하나의 속성으로 구성됨

- 복합 식별자 : 2개 이상의 속성으로 구성됨

<br>

### 대체 여부
- 본질 식별자 : 업무에 의해 만들어지는 식별자

- 인조 식별자 : 인위적으로 만든 식별자

<br>

### 주 식별자 도출기준
1. 해당 업무에서 자주 이용되는 속성임

2. 명칭, 내역 등과 같이 이름으로 기술되는 것들은 아님

3. 복합으로 주 식별자로 구성할 경우, 너무 많은 속성은 금지

<br>

### 식별자 관계
- 주 식별자 : 자식의 주 식별자로 부모의 주 식별자 상속함
    
    - 부모로부터 받은 식별자를 자식엔터티의 주식별자로 이용하는 경우

    - 강한 연결 관계 표현, 실선 표기

    - 식별자 관계로만 설정 시 주식별자 증가로 오류 유발

- **비 식별자** : 부모 속성을 자식의 일반 속성으로 사용함

    - 약한 연결관계 표현
    
    - 비식별자 관계로만 설정 시 부모 엔터티와 조인하여 성능 저하

<br>

**비 식별자가 생성되는 경우**

    1. 부모 없는 자식이 생성될 수 있는 경우

    2. 부모와 자식의 생명 주기가 다른 경우

    3. 여러개의 엔터티가 하나의 엔터티로 통합되어 표현되었는데 각각의 엔터티가 별도의 관계를 가진 경우

    4. 자식 엔터티에 별도의 주식별자를 생성하는 것이 더 유리한 경우

    5. SQL 문장이 길어져 복잡성 증가되는 것 방지
        

## 관계

### 관계
> 엔터티의 인스턴스 사이의 논리적인 연관성으로서 존재의 형태로서나 행위로서 서로에게 연관성이 부여된 상태. 관계 페어링의 집합

- 강사 - `가르친다(관계)` - 수강생

<br>

### 페어링
- 엔터티 안에 인스턴스가 개별적으로 관계를 가지는 것

<br>

### UML(통합 모델링 언어)에서의 관계
- 연관관계(`실선`) : 항상 이용하는 관계

- 의존관계(`점선`) : 상대 행위에 의해 발생하는 관계

<br>

### 관계의 표기법

- 관계명 : 관계의 이름

- 관계차수 : `1:1`, `1:M`, `M:N`

- 관계선택성(관계선택사양) : 필수관계, 선택관계

<br>

### 관계 체크사항
1. 2개의 엔터티 사이에 관심있는 연관 규칙이 있는가?

2. 2개의 엔터티 사이에 정보의 조합 발생이 있는가?

3. 업무기술서, 장표에 관계 연결에 대한 규칙이 서술되어 있는가?

4. 업무기술서, 장표에 관계 연결을 가능케 하는 동사가 있는가?