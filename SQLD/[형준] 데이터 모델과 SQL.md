# 정규화
> 이상 현상이 발생하지 않도록 관련 있는 속성들로만 구성하기 위해 엔티티를 작은 단위로 분리하는 과정

논리 데이터 모델에서 행하는 과정(개념적, 물리적 모델링 X)

> ### 이상 현상
> 불필요한 데이터 중복으로 인해 릴레이션에 대한 데이터 삽입, 수정, 삭제 연산을 수행할 때 발생할 수 있는 부작용

## 정규화의 장점과 단점
### 정규화의 장점(정규화를 해야 하는 이유)
- 데이터 무결성 보장
- 데이터 일관성 확보
- 데이터 독립성 확보
- 데이터 유연성 확보
- 입력, 수정, 삭제 성능은 일반적으로 향상됨
  - 조회 성능은 많은 조인으로 인해 저하될 수 있음

### 정규화의 단점
- 엔티티 개수 증가
- 관계 증가
- 데이터 조회 시 여러 번의 조인 증가로 인해 조회 성능 저하

## 정규화의 종류
![alt text](./[형준]%20Image/{AFC3C091-6398-4674-931D-512F2D9C767A}.png)
### 제 1정규형
> 모든 속성은 분해되지 않는 원자 값만 가짐

만약 다중 값(분해되는 값)을 가진다면 1정규화 진행

- 이벤트 번호와 당첨 여부 속성이 다중 값을 갖는다

- 1정규화 전
![alt text](./[형준]%20Image/{A9FD3894-D772-43ED-8B4B-296E12F1A70A}.png)

- 1정규화 후
![alt text](./[형준]%20Image/{E27812FC-4950-47DC-9017-9DB8DBEEA2EA}.png)

### 제 2정규형
> 1 정규형에 속하고 모든 속성이 주 식별자(기본키)에 완전 함수 종속

일반 속성이 하나라도 부분 함수 종속을 갖는 다면 2정규화 진행

![alt text](./[형준]%20Image/{EC9662FD-FD66-440E-BDCF-500B7FAD78BA}.png)

### 제 3정규형
> 일반 속성들은 주 식별자에만 함수적 종속 가짐

제 2정규형에 속하지만 이행적 함수 종속을 이루는 경우 3정규화 진행
> ### 이행적 함수 종속
> ![alt text](./[형준]%20Image/{51408725-9292-433B-B508-28ACB51937A5}.png)

![alt text](./[형준]%20Image/{47F61705-18AC-45EA-AA95-3380B44ED441}.png)

### BCNF 정규화
모든 결정자가 후보키가 되도록 테이블 분해
![alt text](./[형준]%20Image/{72E396E9-5885-41F8-96D5-6CBCC8AA6CDD}.png)

### 제 4정규화
여러 속성이 하나의 속성을 종속시킬 때 분해해서 다중값 종속성 제거

### 제 5정규화
조인에 의해 새로운 종속성 발생 시 이를 막기 위해 엔티티 재분해

# 관계와 조인
> ### 관계란?
> 부모 엔티티의 식별자를 자식에 상속하고, 상속된 속성을 매핑키(조인키)로 활용

> ### 조인(JOIN)이란?
> 데이터 중복을 피하기 위해 테이블을 정규화로 분리하고, 분리된 테이블을 참조하기 위해서 연결

### 계층형 데이터 모델
> 하나의 엔티티 내에서 인스턴스끼리 계층 구조를 가지는 경우

![alt text](./[형준]%20Image/image-3.png)
담당관리자는 사원의 사원번호를 의미한다.
즉, SCOTT을 조회하면 담당관리자(1005)인 FORD까지 조회된다.
이렇게 엔티티 내부에서 다른 인스턴스를 조인하는 것을 **셀프 조인**이라고 한다.

![alt text](./[형준]%20Image/image-4.png)

계층형으로 표현하면 아래와 같다.
![alt text](./[형준]%20Image/image-5.png)

### 상호배타적 관계
> 하나의 부모가 두 개의 자식 엔티티를 가질 때 행위 조건에 따라 두 자식 중 하나의 자식만 관계를 가질 수 있는 것


주문 앤티티에는 개인고객과 법인고객 중 하나의 엔티티만 상속될 수 있음
![alt text](./[형준]%20Image/image-2.png)

# 트랜잭션
> 하나의 작업을 수행하는데 필요한 데이터베이스 연산들을 모아놓은 것(SQL을 모아놓은 것)

- 트랜잭션에 속한 동작들은 모두 성공하거나 취소(UNDO)되어야 함
  - 트랜잭션의 원자성
- 서로 독립적으로 동작하면 안되고 순차적으로 동작해야 함
- 부분 커밋 불가능, 동시 커밋하거나 롤백해야 함