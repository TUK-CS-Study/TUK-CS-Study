# OSI 7계층이란?

![Pasted image 20240929170241](https://github.com/user-attachments/assets/2b8d2a80-1fe8-442d-a7ac-0908e57078c5)

### 물리 계층 (Physical Layer) 
> **물리 계층**
> 데이터를 전기 신호로 변환하여 전송하는 계층
> 케이블, 스위치 등 물리적 매체 사용
> **전송 단위: 비트(Bit)**
> **대표적인 장비**: 허브, 리피터 등
### 데이터 링크 계층 (Data Link Layer)  
> **데이터 링크 계층**
> 데이터 전송 오류 검출 및 수정하며, 데이터의 물리적 전송을 관리하는 계층
> 즉, 이웃한 노드 간 통신을 담당하는 계층
> MAC 주소 사용하여 장치를 식별
> **전송 단위: 프레임**
> **대표적인 장비**: 브리지, 스위칭 허브 등

#### **프로토콜**
- **HDLC**(High-level Data Link Control)
	- 점대점 방식이나 다중방식의 통신에 사용되는 ISO에서 표준화한 동기식 비트 중심
- **PPP**(Point-to-Point Protocol)
	- 두 통신 노드 간의 직접적인 연결을 위해 사용
- **프레임 릴레이**(Frame Relay)
	- 프로토콜 처리를 간략화하여 단순히 데이터 프레임들의 중계 기능 & 다중화 기능만 수행 -> 데이터 처리속도 ↑ 및 전송지연 ↓ 고속의 데이터 전송 기술 
- **ATM**(Asynchronous Tranfer Mode)
	- 정보전달의 기능 단위를 53바이트 셀 단위로 전달하는 비동기식 시분할 다중화 방식의 패킷 전송 기술
### 네트워크 계층 (Network Layer)
> **네트워크 계층**
> 데이터를 출발지에서 목적지까지 경로 설정(라우팅)하여 전달하는 계층
> IP 주소 사용하여 장치 식별
> **전송 단위: 패킷**
> **대표적인 장비**: 라우터, 게이트웨이, 공유기 등

#### 프로토콜
- **IP**(Internet Protocol)
	- 송수신 간 패킷 단위로 데이터 교환하는 통신 프로토콜 
- **ARP**(Address Resolution Protocol)
	- **IP 주소 -> MAC 주소**(물리 주소) 변환 
- **RARP**(Reverse Address Resolution Protocol)
	- **MAC 주소(물리 주소) -> IP 주소**로 변환
- **ICMP**(Internet Control Message Protocol)
	- 전송 오류 발생하는 경우 **오류 정보 전송**하는 목적
	- 메시지 형식은 8바이트 헤더와 가변 길이의 데이터 영역으로 분리
	- 수신지 도달 불가 메시지는 수신지 or 서비스 도달할 수 없는 호스트 통지하는 데 사용
	- ICMP 프로토콜 사용해서 ping 유틸리티 구현을 통해 오류 발생했음 알림 
- **IGMP**(Internet Group Message Protocol)
	- 호스트와 인접 라우터가 **멀티캐스트 그룹 멤버십 구성**하는 데 사용
	- 화상회의, IPTV에 사용
	- 그룹 가입, 멤버십 감시, 멤버십 응답, 멤버쉽 탈퇴 기능
- **라우팅 프로토콜**
	- 목적지까지 갈 수 있는 최적의 경로 설정해주는 라우터 간 상호 통신 프로토콜
- **NAT**(Network Address Translation)
	- **사설 IP 주소 -> 공인 IP 주소**
	- 기업 내부 사설 IP -> (외부 통신) -> 공인 IP 주소: 기업 보안 강화 가능
#### IP
IP 프로토콜은 IPv4와 IPv6가 있다.
IPv4는 현재까지 주로 사용되는 프로토콜로 10진수 32비트로 표현되며 주소 개수가 약 43억개로 현재는 고갈된 상태이다. 이러한 문제를 해결하기 위해 공인 IP주소, 사설 IP주소를 사용하는 방법과 16진수 128비트로 표현되어 거의 무한대에 가까운 주소 개수를 갖는 IPv6가 나왔다.
![Pasted image 20240723022214](https://github.com/user-attachments/assets/94f9fb2d-c5a1-4e34-8882-1acc75d4de17)
##### IP 통신 방식
- **멀티캐스트 프로토콜**
  - 멀티캐스트 라우팅 프로토콜 + 그룹관리 프로토콜(IGMP)
	![Pasted image 20240723022451](https://github.com/user-attachments/assets/2e2ecc66-c6d7-4fd5-b970-ccd94b5d7b5d)
	- 같은 내용 데이터 **여러 명의 특정한 그룹의 수신자에게 전달**하는 방식
  - **멀티캐스트 라우팅 프로토콜**
    - 특정 그룹의 모든 사용자에게 동일 메시지 전송
  - **그룹관리 프로토콜(IGMP)**
    - 그룹 내 호스트들에게 메시지 전송(관리)
- **유니캐스트 프로토콜(One-to-One)**
	- 특정 네트워크 목적지에 1:1로 전송 
- **브로드캐스트 프로토콜**
	- **같은 서브 네트워크상 모든 수신자**에게 **데이터 전송**
- **애니캐스트 프로토콜**
	- **그룹 내 가장 가까운 곳**에 있는 **수신자에게 전달**

### 전송 계층 (Transport Layer)
> **전송 계층**
> 프로세스간(종단간(End-to-End)) 신뢰성 있는 연결을 담당하는 계층
> Port 번호를 통해 프로세스를 구분
> **전송 단위: 세그먼트**
#### 프로토콜
전송 계층의 프로토콜로는 TCP와 UDP가 있다. 

#### TCP
송신지와 수신지가 통신하기 전 3 way handshake로 연결을 하고 연결을 유지한 상태로 통신하는 프로토콜이다. 
- 연결 시도(3 way handshake)
	![{E5C95E6A-ECA7-48F4-8945-8BF9F950E4EB}](https://github.com/user-attachments/assets/13a211c1-c6ec-4df6-9a3e-613fdce1ce38)
- 연결 종료
	![{BC07D855-60CA-418D-AFA2-1982FB95B5B1}](https://github.com/user-attachments/assets/6922dca2-5785-478f-8d68-6afc9b167600)


- 특징
	- **신뢰성 보장 (<-> UDP)** 
	- **연결 지향적 특성 (<-> UDP)**
	- **흐름 제어**
		- 송신, 수신 속도 일치 시키는 기능
		- 송신이 너무 빨라서 전부 다 수신할 수 없는 경우 흐름 제어를 통해 송신을 늦춤 
	- **혼잡 제어(Congestion Control)**
		- 네트워크가 혼잡할 경우 혼잡제어 기법으로 송신율을 감속
- 헤더 구조
	![Pasted image 20240723173405](https://github.com/user-attachments/assets/7b54a7b4-f142-4c23-98cb-33279c37a2e4)
	- TCP 헤더의 최소 크기는 20바이트
	- 이건 넘어가자

#### UDP
송신지와 수신지를 연결하지 않고 필요할 때마다 수신지로 전송하는 프로토콜이다.
- 특징
	- **비신뢰성**
	- **순서화되지 않은 데이터그램 서비스 제공**
		- 수신 메시지 순서 맞추지 X
		- 흐름 제어를 위한 피드백 제공X
	- **실시간 응용 및 멀티캐스팅 기능**
	- **단순 헤더**
		- 고정 크기 8바이트만 사용
		- TCP에 비해 헤더 크기 작고 단순
- 헤더 구조
	![Pasted image 20240723173541](https://github.com/user-attachments/assets/e43c550a-62d6-4045-997a-ecbb9ad21a54)

### 세션 계층 (Session Layer)  
> **세션 계층**
> 통신하는 장치 간의 세션을 설정, 유지, 종료하는 역할을 담당하는 계층
> 즉, 통신 중 연결이 끊어지지 않도록 유지시켜주는 역할이고 이를 위한 프로세스들의 논리적 연결 담당
> TCP/IP 세션 연결 설정과 해제, 세션 메시지 전동 등 기능 수행
> **전송 단위: 데이터**
### 표현 계층 (Presentation Layer)  
> **표현 계층**
> 하위 계층에 보내는 데이터를 통신에 알맞은 형태로 만들거나 하위 계층에서 온 데이터를 사용자가 이해할 수 있는 형태로 만드는 역할을 하는 계층
> 즉, 데이터를 사용자나 특정 계층이 이해할 수 있게 변환(압축, 암호화, 복호화)를 수행
> **전송 단위: 데이터**
### 응용 계층 (Application Layer)
> **응용 계층**
>  응용  서비스 수행하는 계층
>  메일, 웹 브라우징 등과 같은 응용 프로그램 서비스
>  **전송 단위: 데이터**

## 물리 계층 ~ 전송 계층 예시 설명
출발지 A 노드에서 목적지 D 노드까지 데이터를 전송하려고 한다.
각 노드는 IP 주소가 주어져 있고 노드 안에 여러 프로세스는 Port 번호를 통해 구분한다.
- **전송 계층**은 Port 번호로 프로세스간 통신을 담당하는 계층이다.
- **네트워크 계층**은 IP 주소로 출발지(노드)에서 목적지(노드)까지 경로를 라우팅하는 계층이다.
- **데이터 링크 계층**은 라우팅 된 노드 간 데이터 전송을 담당하는 계층이다.
- **물리 계층**은 실제 전기적 데이터를 전송하는 계층이다.

예시를 통해 이해해보자
집에 여러 대의 컴퓨터가 하나의 공유기에 연결되어 하나의 공인 IP를 공유하는 경우, 네트워크 통신 과정은 다음과 같이 정리할 수 있다.
- **네트워크 계층의 역할**
	집의 공인 IP로 들어온 통신은 네트워크 계층에서 처리됩니다. 이 계층은 데이터 패킷의 경로 설정과 라우팅을 담당하여, 외부에서 들어오는 데이터를 공유기까지 전달합니다.
- **전송 계층의 역할**
	공유기에서 데이터가 특정 컴퓨터로 전달될 때, 전송 계층이 Port 번호를 사용하여 목적지를 구분합니다. 각 컴퓨터에는 고유한 Port 번호가 부여되어 있어, 공유기는 이를 통해 적절한 컴퓨터에 데이터를 전송합니다.

이 과정을 통해, 외부에서 들어오는 데이터는 네트워크 계층을 통해 공유기로 전달되고, 전송 계층을 통해 각 컴퓨터로 구분되어 전달됩니다.
![{11F4E75D-67CD-4AE6-8331-5ECFA35E22AB}](https://github.com/user-attachments/assets/fbc46346-a730-43c8-afea-371474db794f)

즉, 공유기는 공인 IP 주소를 갖고 공유기에 연결된 각종 기기들은 사설 IP 주소를 갖는다. 공유기로 데이터가 들어오면 공유기가 port 번호를 통해 수신지를 찾아 데이터를 전송한다.

![Pasted image 20240929181437](https://github.com/user-attachments/assets/b9cdf1a4-f8eb-4d4c-9d7a-6da3705da59a)
